{"ast":null,"code":"var _jsxFileName = \"/Users/archit/Desktop/codes/pep/React/reels/src/Components/Signup/Signup.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport { firebaseStorage, firebaseDb } from '../../config/firebase';\nimport { AuthContext } from '../../context/AuthProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Signup = props => {\n  _s();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [profileImage, setProfileImage] = useState(null);\n  const [message, setMessage] = useState(\"\");\n  const {\n    signUp\n  } = useContext(AuthContext);\n\n  const handleFileSubmit = event => {\n    let fileObject = event.target.files[0];\n    setProfileImage(fileObject);\n  };\n\n  const handleSignUp = async () => {\n    try {\n      let response = await signUp(email, password);\n      let uid = response.user.uid;\n      const uploadPhotoObject = firebaseStorage.ref(`/profilePhotos/${uid}/image.jpg`).put(profileImage);\n      uploadPhotoObject.on(\"state_changed\", fun1, fun2, fun3); // to track the progress of the upload\n\n      function fun1(snapshot) {\n        // bytes transferred\n        // totoal bytes\n        let progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(progress);\n      } // if indicates a error !!\n\n\n      function fun2(error) {\n        console.log(error);\n      } // it indicates success of the upload !!\n\n\n      async function fun3() {\n        let profileImageUrl = await uploadPhotoObject.snapshot.ref.getDownloadURL(); // db me collection => document => {username , email , profileImageUrl};\n\n        firebaseDb.collection(\"users\").doc(uid).set({\n          email: email,\n          userId: uid,\n          username: username,\n          profileImageUrl: profileImageUrl,\n          postsCreated: []\n        });\n        props.history.push(\"/\");\n      }\n    } catch (err) {\n      setMessage(err.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Signup Page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Username\", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: username,\n          onChange: e => setUsername(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" Email \", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: email,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Password\", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Profile Image\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          onChange: e => {\n            handleFileSubmit(e);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSignUp,\n      children: \"SignUp\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        color: \"red\"\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Signup, \"CNfPVyr/kiF2rB/zN28v01HVhTM=\");\n\n_c = Signup;\nexport default Signup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["/Users/archit/Desktop/codes/pep/React/reels/src/Components/Signup/Signup.jsx"],"names":["React","useContext","useState","firebaseStorage","firebaseDb","AuthContext","Signup","props","email","setEmail","password","setPassword","username","setUsername","profileImage","setProfileImage","message","setMessage","signUp","handleFileSubmit","event","fileObject","target","files","handleSignUp","response","uid","user","uploadPhotoObject","ref","put","on","fun1","fun2","fun3","snapshot","progress","bytesTransferred","totalBytes","console","log","error","profileImageUrl","getDownloadURL","collection","doc","set","userId","postsCreated","history","push","err","e","value","color"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SAASC,eAAT,EAA0BC,UAA1B,QAA4C,uBAA5C;AACA,SAASC,WAAT,QAA4B,4BAA5B;;;AAEA,MAAMC,MAAM,GAAIC,KAAD,IAAW;AAAA;;AACtB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACU,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACY,YAAD,EAAeC,eAAf,IAAkCb,QAAQ,CAAC,IAAD,CAAhD;AACA,QAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM;AAAEgB,IAAAA;AAAF,MAAajB,UAAU,CAACI,WAAD,CAA7B;;AAEA,QAAMc,gBAAgB,GAAIC,KAAD,IAAW;AAClC,QAAIC,UAAU,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAjB;AACAR,IAAAA,eAAe,CAACM,UAAD,CAAf;AACD,GAHD;;AAKA,QAAMG,YAAY,GAAG,YAAY;AAC7B,QAAI;AACA,UAAIC,QAAQ,GAAG,MAAMP,MAAM,CAACV,KAAD,EAAQE,QAAR,CAA3B;AACA,UAAIgB,GAAG,GAAGD,QAAQ,CAACE,IAAT,CAAcD,GAAxB;AACA,YAAME,iBAAiB,GAAGzB,eAAe,CAAC0B,GAAhB,CAAqB,kBAAiBH,GAAI,YAA1C,EAAuDI,GAAvD,CAA2DhB,YAA3D,CAA1B;AACAc,MAAAA,iBAAiB,CAACG,EAAlB,CAAqB,eAArB,EAAsCC,IAAtC,EAA4CC,IAA5C,EAAkDC,IAAlD,EAJA,CAKA;;AACA,eAASF,IAAT,CAAcG,QAAd,EAAwB;AACpB;AACA;AACA,YAAIC,QAAQ,GAAID,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GAAnE;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AACH,OAXD,CAYA;;;AACA,eAASH,IAAT,CAAcQ,KAAd,EAAqB;AACjBF,QAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACH,OAfD,CAgBA;;;AACA,qBAAeP,IAAf,GAAsB;AAClB,YAAIQ,eAAe,GACf,MAAMd,iBAAiB,CAACO,QAAlB,CAA2BN,GAA3B,CAA+Bc,cAA/B,EADV,CADkB,CAGlB;;AACAvC,QAAAA,UAAU,CAACwC,UAAX,CAAsB,OAAtB,EAA+BC,GAA/B,CAAmCnB,GAAnC,EAAwCoB,GAAxC,CAA4C;AACxCtC,UAAAA,KAAK,EAAEA,KADiC;AAExCuC,UAAAA,MAAM,EAAErB,GAFgC;AAGxCd,UAAAA,QAAQ,EAAEA,QAH8B;AAIxC8B,UAAAA,eAAe,EAAEA,eAJuB;AAKxCM,UAAAA,YAAY,EAAE;AAL0B,SAA5C;AAOAzC,QAAAA,KAAK,CAAC0C,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACH;AACJ,KA9BD,CA8BE,OAAOC,GAAP,EAAY;AACVlC,MAAAA,UAAU,CAACkC,GAAG,CAACnC,OAAL,CAAV;AACH;AACJ,GAlCD;;AAoCA,sBACI;AAAA,4BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAA,8BACI;AAAA,4CAEI;AAAO,UAAA,KAAK,EAAEJ,QAAd;AAAwB,UAAA,QAAQ,EAAGwC,CAAD,IAAOvC,WAAW,CAACuC,CAAC,CAAC9B,MAAF,CAAS+B,KAAV;AAApD;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAKI;AAAA,2CAAY;AACJ,UAAA,KAAK,EAAE7C,KADH;AAEJ,UAAA,QAAQ,EAAG4C,CAAD,IAAO3C,QAAQ,CAAC2C,CAAC,CAAC9B,MAAF,CAAS+B,KAAV;AAFrB;AAAA;AAAA;AAAA;AAAA,gBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,cALJ,eASI;AAAA,4CAEI;AACI,UAAA,KAAK,EAAE3C,QADX;AAEI,UAAA,QAAQ,EAAG0C,CAAD,IAAOzC,WAAW,CAACyC,CAAC,CAAC9B,MAAF,CAAS+B,KAAV;AAFhC;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cATJ,eAgBI;AAAA,iDAEI;AACI,UAAA,IAAI,EAAC,MADT;AAEI,UAAA,MAAM,EAAC,SAFX;AAGI,UAAA,QAAQ,EAAGD,CAAD,IAAO;AACbjC,YAAAA,gBAAgB,CAACiC,CAAD,CAAhB;AACH;AALL;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eA6BI;AAAQ,MAAA,OAAO,EAAE5B,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YA7BJ,eA8BI;AAAI,MAAA,KAAK,EAAE;AAAE8B,QAAAA,KAAK,EAAE;AAAT,OAAX;AAAA,gBAA8BtC;AAA9B;AAAA;AAAA;AAAA;AAAA,YA9BJ,EA8BgD,GA9BhD;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAkCH,CAnFD;;GAAMV,M;;KAAAA,M;AAqFN,eAAeA,MAAf","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { firebaseStorage, firebaseDb } from '../../config/firebase';\nimport { AuthContext } from '../../context/AuthProvider';\n\nconst Signup = (props) => {\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [username, setUsername] = useState(\"\");\n    const [profileImage, setProfileImage] = useState(null);\n    const [message, setMessage] = useState(\"\");\n    const { signUp } = useContext(AuthContext);\n  \n    const handleFileSubmit = (event) => {\n      let fileObject = event.target.files[0];\n      setProfileImage(fileObject);\n    };\n\n    const handleSignUp = async () => {\n        try {\n            let response = await signUp(email, password);\n            let uid = response.user.uid;\n            const uploadPhotoObject = firebaseStorage.ref(`/profilePhotos/${uid}/image.jpg`).put(profileImage);\n            uploadPhotoObject.on(\"state_changed\", fun1, fun2, fun3);\n            // to track the progress of the upload\n            function fun1(snapshot) {\n                // bytes transferred\n                // totoal bytes\n                let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                console.log(progress);\n            }\n            // if indicates a error !!\n            function fun2(error) {\n                console.log(error);\n            }\n            // it indicates success of the upload !!\n            async function fun3() {\n                let profileImageUrl =\n                    await uploadPhotoObject.snapshot.ref.getDownloadURL();\n                // db me collection => document => {username , email , profileImageUrl};\n                firebaseDb.collection(\"users\").doc(uid).set({\n                    email: email,\n                    userId: uid,\n                    username: username,\n                    profileImageUrl: profileImageUrl,\n                    postsCreated: []\n                });\n                props.history.push(\"/\");\n            }\n        } catch (err) {\n            setMessage(err.message);\n        }\n    };\n\n    return (\n        <div>\n            <h1>Signup Page</h1>\n            <div>\n                <div>\n                    Username\n                    <input value={username} onChange={(e) => setUsername(e.target.value)}></input>\n                </div>\n                <div> Email <input\n                        value={email}\n                        onChange={(e) => setEmail(e.target.value)}></input>\n                </div>\n                <div>\n                    Password\n                    <input\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                    ></input>\n                </div>\n                <div>\n                    Profile Image\n                    <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={(e) => {\n                            handleFileSubmit(e);\n                        }}\n                    ></input>\n                </div>\n            </div>\n            <button onClick={handleSignUp}>SignUp</button>\n            <h2 style={{ color: \"red\" }}>{message}</h2>{\" \"}\n        </div>\n    );\n};\n\nexport default Signup;"]},"metadata":{},"sourceType":"module"}